{"objectID":"https://esthes.is/docs/edge_examples.html#kubernetes_installation","parent":"https://esthes.is/docs/edge_examples.html#standalone_installation","pageViews":0,"url":"writerside-documentation/https://esthes.is/docs/edge/examples.html#kubernetes-installation","mainTitle":"Examples","product":"https://esthes.is/docs/edge","headings":"Examples,Kubernetes installation","content":"Start esthesis EDGE in Kubernetes, deploying all supporting infrastructure, including MariaDB and InfluxDB. Enable Enedis module, and configure local data sync, as well as esthesis CORE data sync and device registration. The esthesis EDGE service is exposed as a LoadBalancer service:\nhelm install edge oci://registry-1.docker.io/esthesisiot/esthesis-edge-helm --version \nhelm upgrade --install edge . \\\n  --set global.esthesisRegistry\u003d\"192.168.50.211:5000/esthesis\" \\\n  --set global.timezone\u003d\"Europe/Athens\" \\\n  --set quarkus.log.level\u003d\"DEBUG\" \\\n  --set quarkus.restClient.esthesisAgentServiceClient.url\u003d\"http://192.168.40.236:59070\" \\\n  --set quarkus.restClient.enedisClient.url\u003d\"https://gw.ext.prod-sandbox.api.enedis.fr\" \\\n  --set esthesis.edge.adminSecret\u003d\"e35b9b5d-8831-4466-ac50-419b2a89c8b6\" \\\n  --set esthesis.edge.service.type\u003d\"LoadBalancer\" \\\n  --set esthesis.edge.local.enabled\u003d\"true\" \\\n  --set esthesis.edge.local.influxDb.token\u003d\"fVfC4PNVzPnO_qsYY4X3lsvYmqIZNFHE3kE6fI8hpZqR\" \\\n  --set esthesis.edge.local.influxDb.url\u003d\"http://edge-influxdb:8086\" \\\n  --set esthesis.edge.core.push.enabled\u003d\"true\" \\\n  --set esthesis.edge.core.push.url\u003d\"ssl://mosquitto.esthesis:8883\" \\\n  --set esthesis.edge.core.registration.enabled\u003d\"true\" \\\n  --set esthesis.edge.core.registration.secret\u003d\"ac50419b2a89c8b6\" \\\n  --set esthesis.edge.core.cert\u003d\"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUMxRENDQWJ5Z0F3SUJBZ0lCQVRBTkJna3Foa2lHOXcwQkFRc0ZBREFiTVJrd0Z3WURWUVFEREJCbGMzUm8KWlhOcGN5MWpiM0psTFdOaE1CNFhEVEkwTURZeE9UQTVNRGt4TkZvWERUTTVNVEl6TURJeU1EQXdNRm93R3pFWgpNQmNHQTFVRUF3d1FaWE4wYUdWemFYTXRZMjl5WlMxallUQ0NBU0l3RFFZSktvWklodmNOQVFFQkJRQURnZ0VQCkFEQ0NBUW9DZ2dFQkFOandnNUFqMG9vOWtycDJ0NGdTR2FORFVFbSt6WnkxUytvSlBKYTJMcXN3VU1halFyQlMKVjROY3FsSGVYc3lNcGJKclBZNHlGZGx0WldnUFBTVXgvck1qUmV4ZlBNSVc5cENucFZscEZaNGZqTXhBOWptaAo5MnB1NTZuNEc0M0hiOTQyOHI0bmRsSmNmVDNqRGkwNC9JVFpYNXAyejZQekpMTVhaWVE0d3hlOWdJVm44WHplClhoUXRmV3FuTWNRRGFQek9zUUtrd3RML3Azak13cnZYOURGWjNFMFFQOUpNT2dmdzBhZlB2ZGd0ckkzbStIMWoKY3RHQkZKUWx6ZGdNUlh6M01XQXg0WjVEM3pKUE9ycDQ1SGswL1l3S3V2WlRpTjJsVUZXOTRscVVCTW9lYjdOOAphb3RTbzh5dHR3REtTMzNEcnFQaVhiNWJJcm14VUdYMUlWTUNBd0VBQWFNak1DRXdEd1lEVlIwVEFRSC9CQVV3CkF3RUIvekFPQmdOVkhROEJBZjhFQkFNQ0FRWXdEUVlKS29aSWh2Y05BUUVMQlFBRGdnRUJBQjJhSnl3MVJQQy8KUllrcEpTaG9JQjZiUFM1aHN4cHRrOExPaFNLQytab294cE5zTU05S1AxVEJrSjY3ZXQvYWs2RXRiMTIxSlNCdQpUVWFCWWVLcm9xMi9LNGI5a1E1ZVJRTGt6SUtrYTY1WkJGR0xuaklSR0pYL255SHJtanNMOUxRUTlXYWdpcDhiCms3VDYyOWhVWkkveVlmRGs4MWtaV0ROaEtwNjdZNEQwL1I0dFZZSTBBdEh3R2tpTEFETTB2M3JPMWt5RjNsYVoKV3VZcG9PVktmQkp5NXhKQmJXVGJVeGR0dU5VY25KeUIrZ054RFV3WnRoL3AxMWJzV2ltT05heFBWZGpFN1RpVgpMUWdwZ0tNeVdCL2hxK3lBQmJ0NkVlSWdvd0gvSVJjS0xiUEswOTd5alp6c25vYzAvdkUyK0o5WTBtOU9BQjlsCkZXdkl0Q1NRQ3hrPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg\u003d\u003d\" \\\n  --set esthesis.edge.modules.enedis.enabled\u003d\"true\" \\\n  --set esthesis.edge.modules.enedis.clientId\u003d\"clientId\" \\\n  --set esthesis.edge.modules.enedis.clientSecret\u003d\"clientSecret\" \\\n  --set esthesis.edge.modules.enedis.fetchTypes.dc.enabled\u003d\"true\" \\\n  --set esthesis.edge.modules.enedis.fetchTypes.dcmp.enabled\u003d\"true\" \\\n  --set esthesis.edge.modules.enedis.fetchTypes.dp.enabled\u003d\"true\" \\\n  --set esthesis.edge.modules.enedis.selfRegistration.enabled\u003d\"true\" \\\n  --set esthesis.edge.modules.enedis.selfRegistration.stateChecking\u003d\"false\"\n- Find service IP address EDGE_SRV_IP\u003d$(kubectl get svc esthesis-edge-service -o jsonpath\u003d\u0027{.status.loadBalancer.ingress[0].ip}\u0027)\n- Test administration API authentication\ncurl -v -H \u0026quot;X-ESTHESIS-EDGE-ADMIN-SECRET: e35b9b5d-8831-4466-ac50-419b2a89c8b6\u0026quot; $EDGE_SRV_IP/admin/auth\n- Get registered devices\ncurl -H \u0026quot;X-ESTHESIS-EDGE-ADMIN-SECRET: e35b9b5d-8831-4466-ac50-419b2a89c8b6\u0026quot; $EDGE_SRV_IP/admin/devices\n- List queued data\ncurl -H \u0026quot;X-ESTHESIS-EDGE-ADMIN-SECRET: e35b9b5d-8831-4466-ac50-419b2a89c8b6\u0026quot; $EDGE_SRV_IP/admin/queue\n- Open Enedis self-registration page\n- Display the IP of the esthesis EDGE service: echo $EDGE_SRV_IP - Use the above IP: - Get Enedis configuration\ncurl -H \u0026quot;X-ESTHESIS-EDGE-ADMIN-SECRET: e35b9b5d-8831-4466-ac50-419b2a89c8b6\u0026quot; $EDGE_SRV_IP/enedis/admin/config\n- Get Edge configuration\ncurl -H \u0026quot;X-ESTHESIS-EDGE-ADMIN-SECRET: e35b9b5d-8831-4466-ac50-419b2a89c8b6\u0026quot; $EDGE_SRV_IP/admin/config\n","pageTitle":"Kubernetes installation","metaDescription":"","type":"Documentation","breadcrumbs":"Installation guide","root":0,"depth":1}