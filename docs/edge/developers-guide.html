<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="soft" data-primary-color="#FDAD00" data-link-color="#FDAD00" data-content-max-width="2048"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-11-18T13:22:26.85882947"><title>Developers guide | esthesis EDGE Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"creating-new-modules","level":0,"title":"Creating new modules","anchor":"#creating-new-modules"},{"id":"module-structure","level":0,"title":"Module structure","anchor":"#module-structure"},{"id":"creating-devices","level":0,"title":"Creating devices","anchor":"#creating-devices"},{"id":"queuing-data","level":0,"title":"Queuing data","anchor":"#queuing-data"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Developers guide | esthesis EDGE Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="esthesis EDGE Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/https://esthes.is/docs/edge/developers-guide.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Developers guide | esthesis EDGE Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/https://esthes.is/docs/edge/developers-guide.html#webpage",
    "url": "writerside-documentation/https://esthes.is/docs/edge/developers-guide.html",
    "name": "Developers guide | esthesis EDGE Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentationhttps://esthes.is/docs/edge/#website",
    "url": "writerside-documentationhttps://esthes.is/docs/edge/",
    "name": "esthesis EDGE Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="Developers-guide" data-main-title="Developers guide" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>esthesis EDGE Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Developers-guide" id="Developers-guide.md">Developers guide</h1><p id="z72ru0c_3">To start developing for esthesis EDGE, first you need to set up a <a href="dev-environment-setup.html" id="z72ru0c_8" data-tooltip="In the following sections you can see how to set up a development environment for esthesis EDGE.">development environment</a>.</p><section class="chapter"><h2 id="creating-new-modules" data-toc="creating-new-modules">Creating new modules</h2><p id="z72ru0c_9">esthesis EDGE is designed to be modular, so you can create new modules to extend its functionality. Modules allow you to add new features, fetching data from any third-party system you can communicate with. However, before creating a new module, you should take into account whether the specific third-party system you want to integrate with is of a generic-enough nature, to be part of esthesis EDGE. For private or very specific third-party systems, it is recommended to integrate them with an esthesis CORE agent running alongside them. At any rate, before you decide to create a new module, you can open a new issue on our <a href="https://github.com/esthesis-iot/esthesis-edge/issues" id="z72ru0c_10" data-external="true" rel="noopener noreferrer">GitHub</a> to discuss it first.</p></section><section class="chapter"><h2 id="module-structure" data-toc="module-structure">Module structure</h2><p id="z72ru0c_11">Regarding the functionality of a new module, you are pretty much free to implement it as you see fit. However, there are some guidelines you should follow to make sure your module is compatible with esthesis EDGE.</p><p id="z72ru0c_12">New modules should be placed into their own package under <code class="code" id="z72ru0c_15">esthesis.edge.modules.modulename</code>, for example <code class="code" id="z72ru0c_16">esthesis.edge.modules.weather</code>. Create a main module entry-class, using a method such as <code class="code" id="z72ru0c_17">public void onStart(@Observes StartupEvent ev)</code>, in order to provide some startup information to the users of esthesis EDGE on your module. A message like &quot;XYZ module is enabled.&quot; is recommended, however you can provide any information you see fit.</p><section class="chapter"><h3 id="configuration" data-toc="configuration">Configuration</h3><p id="z72ru0c_18">Depending on the nature of your module, make sure you provide ample configuration options for the users; you should think how other users might use your module and what kind of configuration options they might need. For example, if you are creating a module that fetches weather data, you should provide configuration options for the user to set the location, the units, the API key, etc. You can add your module's configuration options in esthesis EDGE main configuration file, <code class="code" id="z72ru0c_19">application.yaml</code>, under a new section named <code class="code" id="z72ru0c_20">esthesis.edge.modules.modulename</code>.</p></section><section class="chapter"><h3 id="endpoints" data-toc="endpoints">Endpoints</h3><p id="z72ru0c_21">If your module needs to expose REST endpoints, you can create them by annotating them as JAX-RS resources. The names of your endpoints should be prefixed with the name of your module, for example <code class="code" id="z72ru0c_26">weather/forecast</code>.</p><p id="z72ru0c_22">You can create public and admin endpoints. Public endpoints can be accessed by any user, while admin endpoints require the user to be authenticated using the esthesis EDGE secret token.</p><p id="z72ru0c_23">esthesis EDGE provides two annotations that can be useful when creating your module's endpoints:</p><ul class="list _bullet" id="z72ru0c_24"><li class="list__item" id="z72ru0c_27"><p><code class="code" id="z72ru0c_29">@ModuleEndpoint(enabledProperty = &quot;esthesis.edge.modules.mymodule.enabled&quot;)</code> The <code class="code" id="z72ru0c_30">ModuleEndpoint</code> annotation, allows you to enable or disable your module's endpoints by setting the value of the <code class="code" id="z72ru0c_31">enabledProperty</code> to <code class="code" id="z72ru0c_32">true</code> or <code class="code" id="z72ru0c_33">false</code> in the <code class="code" id="z72ru0c_34">application.yaml</code> configuration file. This annotation is mandatory, so that users can selectively enable or disable your module.</p></li><li class="list__item" id="z72ru0c_28"><p><code class="code" id="z72ru0c_35">@AdminEndpoint</code> The <code class="code" id="z72ru0c_36">AdminEndpoint</code> annotation, allows you to create an endpoint that requires the user to be authenticated using the esthesis EDGE secret token. This annotation is optional, and you can use it only if you need to create an endpoint that requires authentication.</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="z72ru0c_25"><p>Please do not forget to provide complete OpenAPI documentation for your module's endpoints.</p></aside></section></section><section class="chapter"><h2 id="creating-devices" data-toc="creating-devices">Creating devices</h2><p id="z72ru0c_37">esthesis EDGE allows you to fetch data from third-party systems and store in a local InfluxDB. However, one of esthesis EDGE's main advantages is that it integrates flawlessly with esthesis CORE. That effectively means that you can set up esthesis EDGE once, &quot;forget&quot; about it, and then manage your data directly in esthesis CORE - where you have many additional options on how to manage your data, where to store it, how to visualise it, etc.</p><p id="z72ru0c_38">For such an integration to take place, esthesis EDGE follows the same &quot;device&quot; concept as esthesis CORE. For every third-party system that is connected to esthesis EDGE, a virtual device is created in esthesis CORE. This device represents the third-party system and all data fetched from it is stored in the device's data points. In case you create a module that may represent multiple users, you should create a device for each user. It is up to you to ensure that device names (i.e. hardware IDs) are unique for your own module but also for esthesis CORE and EDGE as a whole. A good naming strategy is to prefix hardware IDs with the name of your module, followed by a unique identifier for the user.</p><section class="chapter"><h3 id="devices-configuration" data-toc="devices-configuration">Devices configuration</h3><p id="z72ru0c_40">You can maintain device-specific configuration in esthesis EDGE. This configuration is stored in the MariaDB of esthesis and allows you to store any configuration options you need for your devices. You can maintain any number of configuration options for each device, and you can update them at any time.</p><aside class="prompt" data-type="tip" data-title="" id="z72ru0c_41"><p>esthesis EDGE provides a DeviceService class that can help you create devices and maintain their configuration.</p></aside></section></section><section class="chapter"><h2 id="queuing-data" data-toc="queuing-data">Queuing data</h2><p id="z72ru0c_42">esthesis EDGE works in <a href="how-it-works.html" id="z72ru0c_47" data-tooltip="esthesis EDGE allows you to fetch data from external systems into a local InfluxDB database, as well as to synchronise data with esthesis CORE.">two phases</a>: The first phase is the data collection phase, where data is collected from the third-party systems, and the second phase is the data synchronisation phase, where the data is synchronised with a local InfluxDB and/or esthesis CORE. Those two phases are separated by a queue held in the MariaDB of esthesis EDGE, where the data is stored until it is synchronised.</p><p id="z72ru0c_43">The way in which data is fetched as well as all necessary data structures to support this are totally up to you. To be able to queue your data for esthesis EDGE to synchronise you should use the esthesis Line Protocol (eLP). The specification of eLP can be found in esthesis CORE and esthesis EDGE provide helper classes to make it easier for you to create eLP representations our of your own data structures via tha <code class="code" id="z72ru0c_48">QueueService</code> class.</p><p id="z72ru0c_44">You can prepare a new item to be queued using the <code class="code" id="z72ru0c_49">QueueItem</code> class. <code class="code" id="z72ru0c_50">QueueService</code> class provides a <code class="code" id="z72ru0c_51">queue(QueueItemDTO queueItemDTO)</code> method allowing you to persist your data in the queue. eLP comes into play in the <code class="code" id="z72ru0c_52">dataObject</code> property of the <code class="code" id="z72ru0c_53">QueueItemDTO</code> class. You can create eLP-compatible <code class="code" id="z72ru0c_54">dataObject</code> properties using the provided <code class="code" id="z72ru0c_55">ELPEntry</code> class and its builder, for example:</p><div class="code-block" data-lang="none">
ELPEntry.builder()
  .category(&quot;mycategory&quot;)
  .date(Instant.now())
  .measurement(&quot;12i&quot;)
  .build()
  .toString()
</div><p id="z72ru0c_46">Each <code class="code" id="z72ru0c_56">dataObject</code> might contain multiple eLP entries separated by a new line character, provided all such entries belong to the same device.</p></section><div class="last-modified">Last modified: 18 November 2024</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="api-documentation.html" class="navigation-links__prev">API documentation</a><a href="dev-environment-setup.html" class="navigation-links__next">Dev environment setup</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.js"></script></body></html>