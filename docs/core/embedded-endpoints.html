<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="soft" data-primary-color="#059999" data-link-color="#059999"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-02-13T10:12:45.948204575"><title>Embedded endpoints | esthesis CORE - Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"http-endpoints","level":0,"title":"HTTP endpoints","anchor":"#http-endpoints"},{"id":"mqtt-endpoint","level":0,"title":"MQTT endpoint","anchor":"#mqtt-endpoint"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Embedded endpoints | esthesis CORE - Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="esthesis CORE - Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/embedded-endpoints.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Embedded endpoints | esthesis CORE - Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/embedded-endpoints.html#webpage",
    "url": "writerside-documentation/embedded-endpoints.html",
    "name": "Embedded endpoints | esthesis CORE - Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "esthesis CORE - Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="embedded-endpoints" data-main-title="Embedded endpoints" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Device Agent"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>esthesis CORE - Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="embedded-endpoints" id="embedded-endpoints.md">Embedded endpoints</h1><p id="tqamr_3">esthesis device agent comes with two embedded endpoints:</p><ul class="list _bullet" id="tqamr_4"><li class="list__item" id="tqamr_14"><p>An MQTT endpoint, allowing external applications to communicate with the device agent using MQTT, and</p></li><li class="list__item" id="tqamr_15"><p>An HTTP/REST endpoint, allowing external applications to communicate with the device agent using HTTP.</p></li></ul><aside class="prompt" data-type="tip" data-title="" id="tqamr_5"><p>Both endpoints are off by default, so you need to enable them before you can use them.</p></aside><p id="tqamr_6">The purpose of the embedded endpoints is to allow external sources to forward data to the esthesis platform. Since the endpoints are defined and configured on the esthesis device agent, external sources can forward data to the esthesis platform without having to be aware of any connectivity details, other than the IP address and port of the endpoints on the esthesis device agent.</p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 747.8125 135.5" height="135.5" xmlns="http://www.w3.org/2000/svg" width="747.8125" id="mermaid"><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="10" viewBox="0 0 12 20" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="0" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g id="device" class="cluster default flowchart-label"><rect height="119.5" width="218.875" y="0" x="281.671875" ry="0" rx="0" style=""></rect><g transform="translate(367.984375, 0)" class="cluster-label"><foreignObject height="18" width="46.25"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">device</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-0" d="M126.171875,56.23915515615466L139.13020833333334,54.490962630128884C152.08854166666666,52.7427701041031,178.00520833333334,49.24638505205155,203.921875,47.498192526025775C229.83854166666666,45.75,255.75520833333334,45.75,272.8802083333333,46.47339615457833C290.0052083333333,47.19679230915667,298.3385416666667,48.64358461831335,302.5052083333333,49.36698077289168L306.671875,50.09037692747002"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-1" d="M126.171875,73.26084484384535L139.13020833333334,75.00903736987112C152.08854166666666,76.7572298958969,178.00520833333334,80.25361494794845,203.921875,82.00180747397422C229.83854166666666,83.75,255.75520833333334,83.75,272.8802083333333,83.02660384542166C290.0052083333333,82.30320769084334,298.3385416666667,80.85641538168666,302.5052083333333,80.13301922710832L306.671875,79.40962307252998"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M475.546875,64.75L479.7135416666667,64.75C483.8802083333333,64.75,492.2135416666667,64.75,504.32421875,64.75C516.4348958333334,64.75,532.3229166666666,64.75,548.2109375,64.75C564.0989583333334,64.75,579.9869791666666,64.75,587.9309895833334,64.75L595.875,64.75"></path></g><g class="edgeLabels"><g transform="translate(203.921875, 45.75)" class="edgeLabel"><g transform="translate(-52.75, -9)" class="label"><foreignObject height="18" width="105.5"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">MQTT / IP:port</span></div></foreignObject></g></g><g transform="translate(203.921875, 83.75)" class="edgeLabel"><g transform="translate(-51.4296875, -9)" class="label"><foreignObject height="18" width="102.859375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">REST / IP:port</span></div></foreignObject></g></g><g transform="translate(548.2109375, 64.75)" class="edgeLabel"><g transform="translate(-22.6640625, -9)" class="label"><foreignObject height="18" width="45.328125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">MQTT</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(391.109375, 64.75)" id="flowchart-B-303" class="node default default flowchart-label"><rect height="33" width="168.875" y="-16.5" x="-84.4375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-76.9375, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="153.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis device agent</span></div></foreignObject></g></g><g transform="translate(63.0859375, 64.75)" id="flowchart-A-302" class="node default default flowchart-label"><rect height="33" width="126.171875" y="-16.5" x="-63.0859375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-55.5859375, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="111.171875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">External source</span></div></foreignObject></g></g><g transform="translate(663.84375, 64.75)" id="flowchart-C-304" class="node default default flowchart-label"><rect height="33" width="135.9375" y="-16.5" x="-67.96875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-60.46875, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="120.9375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis platform</span></div></foreignObject></g></g></g></g></g></svg><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 807.453125 134.5" height="134.5" xmlns="http://www.w3.org/2000/svg" width="807.453125" id="mermaid"><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="10" viewBox="0 0 12 20" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="0" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g id="device" class="cluster default flowchart-label"><rect height="118.5" width="560.1875" y="0" x="0" ry="0" rx="0" style=""></rect><g transform="translate(256.96875, 0)" class="cluster-label"><foreignObject height="18" width="46.25"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">device</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-0" d="M151.171875,52.22633217359458L169.10026041666666,50.230276811328814C187.02864583333334,48.23422144906306,222.88541666666666,44.24211072453153,258.7421875,44.02014631451109C294.5989583333333,43.79818190449064,330.4557291666667,47.346363808981295,348.3841145833333,49.12045476122662L366.3125,50.89454571347194"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-B" id="L-A-B-1" d="M151.171875,66.27366782640541L169.10026041666666,68.26972318867118C187.02864583333334,70.26577855093694,222.88541666666666,74.25788927546847,258.7421875,74.47985368548892C294.5989583333333,74.70181809550935,330.4557291666667,71.1536361910187,348.3841145833333,69.37954523877339L366.3125,67.60545428652806"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-C" id="L-B-C-0" d="M535.1875,59.25L539.3541666666666,59.25C543.5208333333334,59.25,551.8541666666666,59.25,563.96484375,59.25C576.0755208333334,59.25,591.9635416666666,59.25,607.8515625,59.25C623.7395833333334,59.25,639.6276041666666,59.25,647.5716145833334,59.25L655.515625,59.25"></path></g><g class="edgeLabels"><g transform="translate(258.7421875, 40.25)" class="edgeLabel"><g transform="translate(-82.5703125, -9)" class="label"><foreignObject height="18" width="165.140625"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">MQTT / 127.0.0.1:1883</span></div></foreignObject></g></g><g transform="translate(258.7421875, 78.25)" class="edgeLabel"><g transform="translate(-81.2421875, -9)" class="label"><foreignObject height="18" width="162.484375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">REST / 127.0.0.1:8080</span></div></foreignObject></g></g><g transform="translate(607.8515625, 59.25)" class="edgeLabel"><g transform="translate(-22.6640625, -9)" class="label"><foreignObject height="18" width="45.328125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">MQTT</span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(450.75, 59.25)" id="flowchart-B-325" class="node default default flowchart-label"><rect height="33" width="168.875" y="-16.5" x="-84.4375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-76.9375, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="153.875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis device agent</span></div></foreignObject></g></g><g transform="translate(88.0859375, 59.25)" id="flowchart-A-324" class="node default default flowchart-label"><rect height="33" width="126.171875" y="-16.5" x="-63.0859375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-55.5859375, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="111.171875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">External source</span></div></foreignObject></g></g><g transform="translate(723.484375, 59.25)" id="flowchart-C-329" class="node default default flowchart-label"><rect height="33" width="135.9375" y="-16.5" x="-67.96875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-60.46875, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="120.9375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis platform</span></div></foreignObject></g></g></g></g></g></svg><p id="tqamr_9">As depicted above, in the case where the external source is running on the same device as the esthesis device agent, the external source can be configured to use <code class="code" id="tqamr_16">127.0.0.1</code>.</p><aside class="prompt" data-type="warning" data-title="" id="tqamr_10"><p>By default, the embedded endpoints do not support security, i.e. they do not support authentication. If you make your endpoints accessible to other devices in your network, make sure you do so in a controlled environment. Alternatively, if your external source is running on the same device as the esthesis device agent, you can have the embedded endpoints only listen to `127.0.0.1` (which is the default value). </p><p id="tqamr_17">You can enable authentication for both the HTTP and the MQTT endpoints.</p></aside><p id="tqamr_11">Both embedded endpoints expect data to follow the <a href="esthesis-line-protocol.html" id="tqamr_18" data-tooltip="The esthesis Line Protocol (eLP) is a simple, text-based protocol, allowing you to push data to the official device agent, or if you have a custom agent, to a data broker from which an esthesis Dataflow reads data form.">esthesis Line Protocol (eLP)</a>, however you can push any other format you may have and convert it into the esthesis Line Protocol using the <a href="transforming-payloads.html" id="tqamr_19" data-tooltip="The embedded MQTT and HTTP endpoints allow the device agent to receive data from external sources using the esthesis Line Protocol. When the external sources are under your control, eLP is a simple protocol you can easily work with. However, when the external sources are not underâ€¦">Transforming payloads</a> functionality of the agent.</p><section class="chapter"><h2 id="http-endpoints" data-toc="http-endpoints">HTTP endpoints</h2><p id="tqamr_20">esthesis device agent exposes two HTTP endpoints:</p><ul class="list _bullet" id="tqamr_21"><li class="list__item" id="tqamr_24"><p><code class="code" id="tqamr_26">/telemetry</code> - for sending telemetry data to the esthesis platform, and</p></li><li class="list__item" id="tqamr_25"><p><code class="code" id="tqamr_27">/metadata</code> - for sending metadata to the esthesis platform.</p></li></ul><aside class="prompt" data-type="note" data-title="" id="tqamr_22"><p>The HTTP endpoints are off by default, so you need to enable them first using the `ENDPOINT_HTTP` environment variable, or the `endpointHttp` command line argument.</p></aside><section class="chapter"><h3 id="sending-data-example-http" data-toc="sending-data-example-http">Sending data example (HTTP)</h3><div class="code-block" data-lang="bash">
curl -X POST 127.0.0.1:8080/telemetry -d &quot;cpu temperature=30&quot;
</div><div class="code-block" data-lang="bash">
curl -X POST 127.0.0.1:8080/metadata -d &quot;net ip='192.168.1.1'&quot;
</div><aside class="prompt" data-type="tip" data-title="" id="tqamr_30"><p>The above example considers the esthesis device agent being accessible at 127.0.0.1 IP address. This is fine if you execute the `curl` command on the same device as the esthesis device agent. If you execute the `curl` command from a different device, you need to replace the IP address with the IP address of the device where the esthesis device agent is running and configure the esthesis device agent to listen to that IP address via the `ENDPOINT_HTTP_LISTENING_IP` environment variable, or the `endpointHttpListeningIP` command line argument.</p></aside></section></section><section class="chapter"><h2 id="mqtt-endpoint" data-toc="mqtt-endpoint">MQTT endpoint</h2><p id="tqamr_31">esthesis device agent exposes two MQTT endpoints:</p><ul class="list _bullet" id="tqamr_32"><li class="list__item" id="tqamr_35"><p><code class="code" id="tqamr_37">telemetry</code> - for sending telemetry data to the esthesis platform, and</p></li><li class="list__item" id="tqamr_36"><p><code class="code" id="tqamr_38">metadata</code> - for sending metadata to the esthesis platform.</p></li></ul><aside class="prompt" data-type="note" data-title="" id="tqamr_33"><p>The MQTT endpoints are off by default, so you need to enable them first using the `ENDPOINT_MQTT` environment variable, or the `endpointMqtt` command line argument.</p></aside><section class="chapter"><h3 id="sending-data-example-mqtt" data-toc="sending-data-example-mqtt">Sending data example (MQTT)</h3><p id="tqamr_39">To send data to the MQTT endpoints you need to use an MQTT client. The following examples use the <a href="https://mosquitto.org" id="tqamr_43" data-external="true" rel="noopener noreferrer">Mosquitto MQTT client</a>, which is available for most operating systems.</p><div class="code-block" data-lang="bash">
mosquitto_pub -h 127.0.0.1 -t telemetry -m &quot;cpu temperature=20&quot;
</div><div class="code-block" data-lang="bash">
mosquitto_pub -h 127.0.0.1 -t metadata -m &quot;net ip='192.168.1.2'&quot;
</div><aside class="prompt" data-type="tip" data-title="" id="tqamr_42"><p>The above example considers the esthesis device agent being accessible at 127.0.0.1 IP address. This is fine if you execute the `mosquitto_pub` command on the same device as the esthesis device agent. If you execute the `mosquitto_pub` command from a different device, you need to replace the IP address with the IP address of the device where the esthesis device agent is running and configure the esthesis device agent to listen to that IP address via the `ENDPOINT_MQTT_LISTENING_IP` environment variable, or the `endpointMqttListeningIP` command line argument.</p></aside></section></section><div class="last-modified">Last modified: 13 February 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="configuration-parameters.html" class="navigation-links__prev">Configuration parameters</a><a href="transforming-payloads.html" class="navigation-links__next">Transforming payloads</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.js"></script></body></html>