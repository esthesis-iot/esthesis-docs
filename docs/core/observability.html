<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="soft" data-primary-color="#059999" data-link-color="#059999"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2025-05-06T07:34:07.640875115"><title>Observability | esthesis CORE - Documentation</title><script type="application/json" id="virtual-toc-data">[{"id":"traces","level":0,"title":"Traces","anchor":"#traces"},{"id":"logging","level":0,"title":"Logging","anchor":"#logging"},{"id":"metrics","level":0,"title":"Metrics","anchor":"#metrics"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.css" rel="stylesheet"><link rel="icon" type="image/png" sizes="16x16" href="images/logo.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Observability | esthesis CORE - Documentation"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="esthesis CORE - Documentation Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/observability.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Observability | esthesis CORE - Documentation"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/observability.html#webpage",
    "url": "writerside-documentation/observability.html",
    "name": "Observability | esthesis CORE - Documentation",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "esthesis CORE - Documentation Help"
}</script><!-- End Schema.org --></head><body data-id="observability" data-main-title="Observability" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs="Developers Guide"><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>esthesis CORE - Documentation  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="observability" id="observability.md">Observability</h1><p id="omcolo_3">esthesis CORE supports integration with distributed tracing, real-time metrics, and centralised logging.</p><section class="chapter"><h2 id="traces" data-toc="traces">Traces</h2><p id="omcolo_7">Tracing is taking place using Quarkus' <a href="https://quarkus.io/guides/opentelemetry" id="omcolo_10" data-external="true" rel="noopener noreferrer">OpenTelemetry</a> integration. There are no special source code actions required to enable tracing, other than properly configuring traces in <code class="code" id="omcolo_11">application.yaml</code>and<code class="code" id="omcolo_12">application-dev.yaml</code> files inside each module. Note that tracing is disabled by default when a module runs in production, and enabled by default when a module runs in development.</p><p id="omcolo_8">Quarkus exports traces using OTel gRPC. In the default development setup, traces are received by Grafana Loki Distributor at port 4317. The distributor is also listening on port 55681 for OTel HTTP traces (notably, used by APISIX).</p><p id="omcolo_9">To store and visualise traces we use <a href="https://grafana.com/oss/tempo" id="omcolo_13" data-external="true" rel="noopener noreferrer">Grafana Tempo</a>. In our default development setup it is available at <a href="http://grafana.esthesis" id="omcolo_14" data-external="true" rel="noopener noreferrer">Grafana UI</a> &gt; Explore &gt; Tempo.</p></section><section class="chapter"><h2 id="logging" data-toc="logging">Logging</h2><p id="omcolo_15">Centralised logging is implemented using Quarkus Logging Gelf. All modules export Graylog Extended Log Format (GELF) messages that can be captured by a GELF receiver. In the default development setup, GELF messages are received by Grafana Promtail running on the development machine, which then forwards them to a Grafana Loki Distributor running on Kubernetes. When you test a production-like installation, there is a Promtail running inside Kubernetes.</p><p id="omcolo_16">Unfortunately, we can not provide a Promtail running in Kubernetes for development as Quarkus Logging Gelf component only supports forwarding logs using UDP. UDP port-forwarding is not (yet) supported in Kubernetes, and alternative setups to expose a UDP port are too complex for a development setup. Therefore, for your development setup you run something like the following:</p><svg aria-roledescription="flowchart-v2" role="graphics-document document" viewBox="-8 -8 718.15625 285"  xmlns="http://www.w3.org/2000/svg" width="718.15625" id="mermaid"><g><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="10" viewBox="0 0 12 20" class="marker flowchart" id="flowchart-pointEnd"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 0 L 10 5 L 0 10 z"></path></marker><marker orient="auto" markerHeight="12" markerWidth="12" markerUnits="userSpaceOnUse" refY="5" refX="0" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-pointStart"><path style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 0 5 L 10 10 L 10 0 z"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="11" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleEnd"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5" refX="-1" viewBox="0 0 10 10" class="marker flowchart" id="flowchart-circleStart"><circle style="stroke-width: 1; stroke-dasharray: 1, 0;" class="arrowMarkerPath" r="5" cy="5" cx="5"></circle></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="12" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossEnd"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><marker orient="auto" markerHeight="11" markerWidth="11" markerUnits="userSpaceOnUse" refY="5.2" refX="-1" viewBox="0 0 11 11" class="marker cross flowchart" id="flowchart-crossStart"><path style="stroke-width: 2; stroke-dasharray: 1, 0;" class="arrowMarkerPath" d="M 1,1 l 9,9 M 10,1 l -9,9"></path></marker><g class="root"><g class="clusters"><g id="Kubernetes" class="cluster default flowchart-label"><rect height="103" width="266.0625" y="83" x="436.09375" ry="0" rx="0" style=""></rect><g transform="translate(528.203125, 83)" class="cluster-label"><foreignObject height="18" width="81.84375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Kubernetes</span></div></foreignObject></g></g><g id="subGraph0" class="cluster default flowchart-label"><rect height="269" width="344.3125" y="0" x="0" ry="0" rx="0" style=""></rect><g transform="translate(92.5546875, 0)" class="cluster-label"><foreignObject height="18" width="159.203125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Development machine</span></div></foreignObject></g></g></g><g class="edgePaths"><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-B LE-A" id="L-B-A-0" d="M153.828125,51.5L161.47786458333334,51.5C169.12760416666666,51.5,184.42708333333334,51.5,203.12572948042168,62.583333333333336C221.82437562751002,73.66666666666667,243.92218875502007,95.83333333333333,254.97109531877507,106.91666666666667L266.0200018825301,118"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-E LE-A" id="L-E-A-0" d="M153.828125,134.5L161.47786458333334,134.5C169.12760416666666,134.5,184.42708333333334,134.5,199.7265625,134.5C215.02604166666666,134.5,230.32552083333334,134.5,237.97526041666666,134.5L245.625,134.5"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-F LE-A" id="L-F-A-0" d="M153.828125,217.5L161.47786458333334,217.5C169.12760416666666,217.5,184.42708333333334,217.5,203.12572948042168,206.41666666666666C221.82437562751002,195.33333333333334,243.92218875502007,173.16666666666666,254.97109531877507,162.08333333333334L266.0200018825301,151"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-A LE-C" id="L-A-C-0" d="M319.3125,134.5L323.4791666666667,134.5C327.6458333333333,134.5,335.9791666666667,134.5,347.7942708333333,134.5C359.609375,134.5,374.90625,134.5,390.203125,134.5C405.5,134.5,420.796875,134.5,432.6119791666667,134.5C444.4270833333333,134.5,452.7604166666667,134.5,456.9270833333333,134.5L461.09375,134.5"></path><path marker-end="url(#flowchart-pointEnd)" style="fill:none;" class="edge-thickness-normal edge-pattern-solid flowchart-link LS-C LE-D" id="L-C-D-0" d="M582.796875,134.5L586.9635416666666,134.5C591.1302083333334,134.5,599.4635416666666,134.5,607.796875,134.5C616.1302083333334,134.5,624.4635416666666,134.5,628.6302083333334,134.5L632.796875,134.5"></path></g><g class="edgeLabels"><g transform="translate(199.7265625, 51.5)" class="edgeLabel"><g transform="translate(-20.8984375, -9)" class="label"><foreignObject height="18" width="41.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">GELF</span></div></foreignObject></g></g><g transform="translate(199.7265625, 134.5)" class="edgeLabel"><g transform="translate(-20.8984375, -9)" class="label"><foreignObject height="18" width="41.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">GELF</span></div></foreignObject></g></g><g transform="translate(199.7265625, 217.5)" class="edgeLabel"><g transform="translate(-20.8984375, -9)" class="label"><foreignObject height="18" width="41.796875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">GELF</span></div></foreignObject></g></g><g transform="translate(390.203125, 134.5)" class="edgeLabel"><g transform="translate(-20.890625, -9)" class="label"><foreignObject height="18" width="41.78125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel">HTTP</span></div></foreignObject></g></g><g class="edgeLabel"><g transform="translate(0, 0)" class="label"><foreignObject height="0" width="0"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="edgeLabel"></span></div></foreignObject></g></g></g><g class="nodes"><g transform="translate(521.9453125, 134.5)" id="flowchart-C-202" class="node default default flowchart-label"><rect height="33" width="121.703125" y="-16.5" x="-60.8515625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-53.3515625, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="106.703125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Loki Distributor</span></div></foreignObject></g></g><g transform="translate(654.9765625, 134.5)" id="flowchart-D-204" class="node default default flowchart-label"><rect height="33" width="44.359375" y="-16.5" x="-22.1796875" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-14.6796875, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="29.359375"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Loki</span></div></foreignObject></g></g><g transform="translate(282.46875, 134.5)" id="flowchart-A-191" class="node default default flowchart-label"><rect height="33" width="73.6875" y="-16.5" x="-36.84375" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-29.34375, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="58.6875"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">Promtail</span></div></foreignObject></g></g><g transform="translate(89.4140625, 51.5)" id="flowchart-B-192" class="node default default flowchart-label"><rect height="33" width="128.828125" y="-16.5" x="-64.4140625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-56.9140625, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="113.828125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis service</span></div></foreignObject></g></g><g transform="translate(89.4140625, 134.5)" id="flowchart-E-193" class="node default default flowchart-label"><rect height="33" width="128.828125" y="-16.5" x="-64.4140625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-56.9140625, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="113.828125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis service</span></div></foreignObject></g></g><g transform="translate(89.4140625, 217.5)" id="flowchart-F-194" class="node default default flowchart-label"><rect height="33" width="128.828125" y="-16.5" x="-64.4140625" ry="0" rx="0" style="" class="basic label-container"></rect><g transform="translate(-56.9140625, -9)" style="" class="label"><rect></rect><foreignObject height="18" width="113.828125"><div style="display: inline-block; white-space: nowrap;" xmlns="http://www.w3.org/1999/xhtml"><span class="nodeLabel">esthesis service</span></div></foreignObject></g></g></g></g></g></svg><p id="omcolo_18">You can find how to run Promtail locally in the <a href="dev-environment-setup.html" id="omcolo_19" data-tooltip="In the following sections you can see how to set up a development environment for esthesis CORE. The development environment varies drastically from the production setup, as its purpose is to allow developers to quickly implement and test new features.">Dev Environment setup</a> page.</p></section><section class="chapter"><h2 id="metrics" data-toc="metrics">Metrics</h2><p id="omcolo_20">Metrics are exported using Quarkus' <a href="https://quarkus.io/guides/micrometer" id="omcolo_21" data-external="true" rel="noopener noreferrer">Micrometer</a> integration. You can access the metrics under <code class="code" id="omcolo_22">/q/metrics</code> endpoint of each module.</p></section><div class="last-modified">Last modified: 06 May 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="auditing.html" class="navigation-links__prev">Auditing</a><a href="provisioning.html" class="navigation-links__next">Provisioning</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b419/app.js"></script></body></html>