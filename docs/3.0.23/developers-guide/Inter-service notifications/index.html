<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-3.0.23 plugin-docs plugin-id-default docs-doc-id-developers-guide/Inter-service notifications">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.1">
<title data-rh="true">Inter-service notifications | esthesis CORE</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://esthes.is/docs/3.0.23/developers-guide/Inter-service notifications"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="3.0.23"><meta data-rh="true" name="docusaurus_tag" content="docs-default-3.0.23"><meta data-rh="true" name="docsearch:version" content="3.0.23"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-3.0.23"><meta data-rh="true" property="og:title" content="Inter-service notifications | esthesis CORE"><meta data-rh="true" name="description" content="In a fully distributed microservices system, like esthesis Core, it is often required a service"><meta data-rh="true" property="og:description" content="In a fully distributed microservices system, like esthesis Core, it is often required a service"><link data-rh="true" rel="icon" href="/docs/img/logo.png"><link data-rh="true" rel="canonical" href="https://esthes.is/docs/3.0.23/developers-guide/Inter-service notifications"><link data-rh="true" rel="alternate" href="https://esthes.is/docs/3.0.23/developers-guide/Inter-service notifications" hreflang="en"><link data-rh="true" rel="alternate" href="https://esthes.is/docs/3.0.23/developers-guide/Inter-service notifications" hreflang="x-default"><link rel="stylesheet" href="/docs/assets/css/styles.cc5aaa46.css">
<link rel="preload" href="/docs/assets/js/runtime~main.4235069c.js" as="script">
<link rel="preload" href="/docs/assets/js/main.52f3ccf5.js" as="script">
</head>
<body class="navigation-with-keyboard" data-theme="light">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/"><div class="navbar__logo"><img src="/docs/img/logo.png" alt="esthesis" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/img/logo.png" alt="esthesis" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">esthesis Core</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/3.0.23/index">Documentation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/3.0.23/installation-guide/">Installation</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/3.0.23/developers-guide/">Developers</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/3.0.23/contact-support/">Contact</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/docs/3.0.23/index">3.0.23</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/developers-guide/Inter-service notifications">Next</a></li><li><a class="dropdown__link" href="/docs/developers-guide/Inter-service notifications">3.0.30</a></li><li><a class="dropdown__link" href="/docs/3.0.29/developers-guide/Inter-service notifications">3.0.29</a></li><li><a class="dropdown__link" href="/docs/3.0.28/developers-guide/Inter-service notifications">3.0.28</a></li><li><a class="dropdown__link" href="/docs/3.0.27/developers-guide/Inter-service notifications">3.0.27</a></li><li><a class="dropdown__link" href="/docs/3.0.26/developers-guide/Inter-service notifications">3.0.26</a></li><li><a class="dropdown__link" href="/docs/3.0.25/developers-guide/Inter-service notifications">3.0.25</a></li><li><a class="dropdown__link" href="/docs/3.0.24/developers-guide/Inter-service notifications">3.0.24</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/docs/3.0.23/developers-guide/Inter-service notifications">3.0.23</a></li><li><a class="dropdown__link" href="/docs/3.0.22/developers-guide/Inter-service notifications">3.0.22</a></li><li><a class="dropdown__link" href="/docs/3.0.21/developers-guide/Inter-service notifications">3.0.21</a></li><li><a class="dropdown__link" href="/docs/3.0.20/developers-guide/Inter-service notifications">3.0.20</a></li><li><a class="dropdown__link" href="/docs/3.0.19/developers-guide/Inter-service notifications">3.0.19</a></li><li><a class="dropdown__link" href="/docs/3.0.18/developers-guide/Inter-service notifications">3.0.18</a></li><li><a class="dropdown__link" href="/docs/3.0.17/developers-guide/Inter-service notifications">3.0.17</a></li><li><a class="dropdown__link" href="/docs/3.0.16/developers-guide/Inter-service notifications">3.0.16</a></li><li><a class="dropdown__link" href="/docs/3.0.9/developers-guide/Inter-service notifications">3.0.9</a></li><li><a class="dropdown__link" href="/docs/3.0.8/developers-guide/Inter-service notifications">3.0.8</a></li><li><a class="dropdown__link" href="/docs/3.0.7/developers-guide/Inter-service notifications">3.0.7</a></li><li><a class="dropdown__link" href="/docs/3.0.6/developers-guide/Inter-service notifications">3.0.6</a></li><li><a class="dropdown__link" href="/docs/3.0.5/developers-guide/Inter-service notifications">3.0.5</a></li><li><a class="dropdown__link" href="/docs/3.0.4/developers-guide/Inter-service notifications">3.0.4</a></li><li><a class="dropdown__link" href="/docs/3.0.3/developers-guide/Inter-service notifications">3.0.3</a></li><li><a class="dropdown__link" href="/docs/3.0.2/developers-guide/Inter-service notifications">3.0.2</a></li><li><a class="dropdown__link" href="/docs/3.0.1/developers-guide/Inter-service notifications">3.0.1</a></li><li><a class="dropdown__link" href="/docs/3.0.0/developers-guide/Inter-service notifications">3.0.0</a></li></ul></div><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Edge<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Gateway<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">UNS<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Historian<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Website<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://github.com/esthesis-iot" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><div class="dsla-search-wrapper"><div class="dsla-search-field" data-tags="default,docs-default-3.0.23"></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/3.0.23/index">Introduction</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/3.0.23/installation-guide/">Installation guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Installation guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/3.0.23/startup-guide/">Startup guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Startup guide&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/3.0.23/user-guide/">User guide</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/3.0.23/device-agent/">Device Agent</a><button aria-label="Toggle the collapsible sidebar category &#x27;Device Agent&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/3.0.23/digital-twins/">Digital Twins</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/3.0.23/dataflows/">Dataflows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Dataflows&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/3.0.23/developers-guide/">Developers Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Developers Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Dev Environment setup">Dev environment setup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Working with Helm charts">Working with Helm charts</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Working with a private Container Registry">Working with a private Container Registry</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Developing backend services">Developing backend services</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Developing dataflows">Developing dataflows</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Permissions and Security">Permissions and Security</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Cross-Service transactions">Cross-Service transactions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Developing esthesis device agent">Developing esthesis Device Agent</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/3.0.23/developers-guide/Inter-service notifications">Inter-service notifications</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Redis cache">Redis cache</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Resources vs System Resources">Resources vs System Resources</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Testing">Testing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Auditing">Auditing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Observability">Observability</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/Release process">Release process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/3.0.23/developers-guide/FAQ">Frequently Asked Quesstions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/3.0.23/References/esthesis-line-protocol">References</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/3.0.23/contact-support/">Contact &amp; Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/3.0.23/uns-edge-gateway-historian">Edge, Gateway, UNS, Historian</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="theme-doc-version-banner alert alert--warning margin-bottom--md" role="alert"><div>This is documentation for <!-- -->esthesis CORE<!-- --> <b>3.0.23</b>, which is no longer actively maintained.</div><div class="margin-top--md">For up-to-date documentation, see the <b><a href="/docs/developers-guide/Inter-service notifications">latest version</a></b> (<!-- -->3.0.30<!-- -->).</div></div><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/3.0.23/developers-guide/"><span itemprop="name">Developers Guide</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Inter-service notifications</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: 3.0.23</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Inter-service notifications</h1><p>In a fully distributed microservices system, like esthesis Core, it is often required a service
to be notified of events that occur in other services. For example, when a device is deleted from
the system, it might be necessary to remove the history of commands that were sent to it.</p><p>In esthesis Core, we use a Kafka-based mechanism to notify services of events that occur in other
services. To facilitate and standardised the use of this mechanism, we have created a library named
<code>utl-kafka-notifications</code>. The aim of this library is not only to provide utility code when you
want to send or receive notifications, but also to provide a standardised way of doing so.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="standardising-components-and-actions">Standardising components and actions<a href="#standardising-components-and-actions" class="hash-link" aria-label="Direct link to Standardising components and actions" title="Direct link to Standardising components and actions">​</a></h2><p>The names of the components that can participate in the notification mechanism are defined in
<a href="https://github.com/esthesis-iot/esthesis-platform/blob/main/esthesis-core/esthesis-core-backend/util/utl-kafka-notifications/utl-kafka-notifications-common/src/main/java/esthesis/util/kafka/notifications/common/KafkaNotificationsConstants.java" target="_blank" rel="noopener noreferrer">KafkaNotificationsConstants.java</a>
file. If the component, or action, you are working with is not included in that file, you should
first extend it with your new component or action.</p><p>There are three different <code>enum</code> classes that you can extend:</p><ol><li><code>Component</code>: This class defines the components that can participate in the notification mechanism. You should add a new entry representing your component.</li><li><code>Subject</code>: This class defines the subject of the component being targeted by the message. For
example, the Device component may publish messages with different subjects to represent the
different types of the underlying object types it manages. For most components, the Subject name
will be the same as the Component name, especially considering the narrow scope of each
microservice in esthesis Core.</li><li><code>Action</code>: This class defines the actions that was performed and that triggered the message. Try
to reuse the existing actions and only define new action types when strictly necessary.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="the-standard-message">The standard message<a href="#the-standard-message" class="hash-link" aria-label="Direct link to The standard message" title="Direct link to The standard message">​</a></h2><p>For components to be able to udnerstand messages sent by other components, all messages are
published as the <a href="https://github.com/esthesis-iot/esthesis-platform/blob/main/esthesis-core/esthesis-core-backend/util/utl-kafka-notifications/utl-kafka-notifications-common/src/main/java/esthesis/util/kafka/notifications/common/AppMessage.java" target="_blank" rel="noopener noreferrer">AppMessage</a>
class. <code>AppMessage</code> encapsulates the information defined in <code>KafkaNotificationsConstants</code> while
also providing a custom payload attribute.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sending-notifications">Sending notifications<a href="#sending-notifications" class="hash-link" aria-label="Direct link to Sending notifications" title="Direct link to Sending notifications">​</a></h2><p>To facilitate sending notifications from your components we have implemented the <a href="https://github.com/esthesis-iot/esthesis-platform/blob/main/esthesis-core/esthesis-core-backend/util/utl-kafka-notifications/utl-kafka-notifications-outgoing/src/main/java/esthesis/util/kafka/notifications/outgoing/KafkaNotification.java" target="_blank" rel="noopener noreferrer">KafkaNotification</a>
annotation. The annotation should be used as a method-level annotation, and it will automatically
publish a notification message to Kafka in case your method is executed successfully. The
annotation is processed by <a href="https://github.com/esthesis-iot/esthesis-platform/blob/main/esthesis-core/esthesis-core-backend/util/utl-kafka-notifications/utl-kafka-notifications-outgoing/src/main/java/esthesis/util/kafka/notifications/outgoing/KafkaNotificationInterceptor.java" target="_blank" rel="noopener noreferrer">KafkaNotificationInterceptor</a>.</p><p>The annotation has the following attributes:</p><ol><li><code>component</code>: The component that is sending the notification.</li><li><code>subject</code>: The subject of the notification.</li><li><code>action</code>: The action that triggered the notification.</li><li><code>comment</code>: A comment that can be used to provide more information about the notification.</li><li><code>idParamOrder</code>: The order of the parameter that contains the ID of the object for the notification.
This parameter starts at 0 to indicate the first parameter of the method. Make sure that if your
method&#x27;s parameters change, you update this attribute accordingly.</li><li><code>idParamRegEx</code>: A regular expression that is used to extract the ID of the object for the notification.
If used, this attribute takes precedence over <code>idParamOrder</code>. This parameter is useful in cases where
the only argument to a method is a complex object that contains the ID of the object for the notification.
See how it is used in <code>register</code> method in <a href="https://github.com/esthesis-iot/esthesis-platform/blob/main/esthesis-core/esthesis-core-backend/services/srv-device/srv-device-impl/src/main/java/esthesis/services/device/impl/service/DeviceRegistrationService.java" target="_blank" rel="noopener noreferrer">DeviceRegistrationService.java</a>
as an example.</li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3><p>To be able to send notification using the above mechanism, you need to set up in your component&#x27;s
applications YAML the following:</p><ul><li>The <code>kafka.bootstrap.servers</code> property, to connect your component to the Kafka broker.</li><li>The <code>mp.messaging.outgoing.esthesis-app-out.topic</code> property set to <code>esthesis-app</code>.</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="example">Example<a href="#example" class="hash-link" aria-label="Direct link to Example" title="Direct link to Example">​</a></h3><p>Let us see how this works taking <a href="https://github.com/esthesis-iot/esthesis-platform/blob/7cb8c453e2c507ab8c90b5d47ae56e14b8aa158d/esthesis-core/esthesis-core-backend/services/srv-device/srv-device-impl/src/main/java/esthesis/services/device/impl/service/DeviceService.java#L219" target="_blank" rel="noopener noreferrer">DeviceService.java</a> as an example:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">@KafkaNotification(component = Component.DEVICE, subject = Subject.DEVICE,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    action = Action.DELETE, idParamOrder = 0, payload = &quot;Device ID&quot;)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">public boolean deleteById(String deviceId) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        // ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once <code>deleteById</code> is executed successfully, a notification message will be published to Kafka with
the following attributes:</p><ol><li><code>component</code>: <code>Component.DEVICE</code></li><li><code>subject</code>: <code>Subject.DEVICE</code></li><li><code>action</code>: <code>Action.DELETE</code></li><li><code>msgId</code>: A UUID created automatically.</li><li><code>targetId</code>: The value of <code>deviceId</code>.</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="receiving-notifications">Receiving notifications<a href="#receiving-notifications" class="hash-link" aria-label="Direct link to Receiving notifications" title="Direct link to Receiving notifications">​</a></h2><p>To receive the notifications generated with the above mechanism, you can use the built-in Kafka
integration of Quarkus. To keep notification handlers consistent between the different components
of the platform, please create a <code>notifications</code> package, with one or more notifications handlers
inside. You can find an example notification handler in <a href="https://github.com/esthesis-iot/esthesis-platform/blob/main/esthesis-core/esthesis-core-backend/services/srv-device/srv-device-impl/src/main/java/esthesis/services/device/impl/notifications/NotificationsHandler.java" target="_blank" rel="noopener noreferrer">NotificationsHandler.java</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="setup-1">Setup<a href="#setup-1" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h3><p>To be able to receive notifications using the above mechanism, you need to set up in your component&#x27;s
applications YAML the following:</p><ul><li>The <code>kafka.bootstrap.servers</code> property, to connect your component to the Kafka broker.</li><li>The <code>mp.messaging.incoming.esthesis-app-in.topic</code> property set to <code>esthesis-app</code>.</li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/3.0.23/developers-guide/Developing esthesis device agent"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Developing esthesis Device Agent</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/3.0.23/developers-guide/Redis cache"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Redis cache</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#standardising-components-and-actions" class="table-of-contents__link toc-highlight">Standardising components and actions</a></li><li><a href="#the-standard-message" class="table-of-contents__link toc-highlight">The standard message</a></li><li><a href="#sending-notifications" class="table-of-contents__link toc-highlight">Sending notifications</a><ul><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a></li><li><a href="#example" class="table-of-contents__link toc-highlight">Example</a></li></ul></li><li><a href="#receiving-notifications" class="table-of-contents__link toc-highlight">Receiving notifications</a><ul><li><a href="#setup-1" class="table-of-contents__link toc-highlight">Setup</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Products</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Core</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Edge</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Gateway</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis UNS</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Historian</a></li></ul></div><div class="col footer__col"><div class="footer__title">Documentation</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Core</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Edge</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Gateway</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis UNS</a></li><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis Historian</a></li></ul></div><div class="col footer__col"><div class="footer__title">Tutorials</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://esthes.is" target="_blank" rel="noopener noreferrer" class="footer__link-item">esthesis YouTube</a></li></ul></div><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://youtube.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.eurodyn.com/contact" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contact page</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright"><div><a href="https://www.eurodyn.com" target="_blank">European Dynamics</a> &copy; 2024</div></div></div></div></footer></div>
<script src="/docs/assets/js/runtime~main.4235069c.js"></script>
<script src="/docs/assets/js/main.52f3ccf5.js"></script>
</body>
</html>